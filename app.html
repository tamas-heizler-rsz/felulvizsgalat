<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8">
  <title>Felülvizsgálat</title>

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#000000">
  <link rel="manifest" href="manifest.json">

  <style>
    body {
      margin: 0;
      padding: 24px;
      font-family: system-ui, sans-serif;
      background: #000;
      color: #fff;
    }

    h1 {
      text-align: center;
      margin-bottom: 24px;
      font-size: 1.4rem;
    }

    form {
      max-width: 420px;
      margin: 0 auto;
      background: #ffffff;
      color: #000;
      padding: 20px;
      border-radius: 16px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.4);
    }

    label {
      display: block;
      margin-bottom: 16px;
      font-size: 0.9rem;
      font-weight: 600;
    }

    input {
      width: 100%;
      padding: 12px;
      margin-top: 6px;
      font-size: 1rem;
      border-radius: 10px;
      border: 1px solid #ccc;
      background: #fff;
      color: #000;
	box-sizing: border-box;
    }

    input:focus {
      outline: 2px solid #FDC024;
      border-color: #FDC024;
    }

    .primary-button {
      background-color: #FDC024;
      color: #000;
      border: none;
      border-radius: 14px;
      padding: 18px 28px;
      font-size: 1.1rem;
      font-weight: 700;
      text-transform: uppercase;
      cursor: pointer;
      width: 100%;
      margin-top: 24px;
    }

    .primary-button:active {
      transform: scale(0.97);
    }
    .secondary-button {
  background-color: #FDC024;
  color: #000;
  border: none;
  border-radius: 10px;
  padding: 10px 16px;
  font-size: 0.85rem;
  font-weight: 600;
  text-transform: uppercase;
  cursor: pointer;
}    

  </style>
</head>

<body>

  <h1>Felülvizsgálati adatok</h1>

<div id="osszegzes" style="display:none; margin-bottom:16px;">
  <strong id="osszegzesSzoveg"></strong>
</div>

<button
  id="ujSorBtn"
  class="secondary-button"
  style="display:none; margin-bottom:24px;"
  type="button"
>
  Új sor
</button>

  <form id="adatForm">

    <label>
      Ügyfél neve
      <input type="text" name="ugyfelNev" placeholder="Cégnév Kft." required>
    </label>

    <label>
      Helyszín
      <input type="text" name="helyszin" placeholder="Város, utca, házszám" required>
    </label>

    <label>
      Vizsgáló
      <input type="text" name="vizsgalo" required>
    </label>

    <label>
      Dátum
      <input type="date" name="datum" id="datum">
    </label>

    <label>
      Kapcsolattartó
      <input type="text" name="kapcsolattarto">
    </label>

    <button type="submit" class="primary-button">
      Tovább
    </button>

  </form>

  <script>
  document.getElementById('datum').value =
    new Date().toISOString().split('T')[0];

  const form = document.getElementById('adatForm');
  const osszegzes = document.getElementById('osszegzes');
  const osszegzesSzoveg = document.getElementById('osszegzesSzoveg');
  const ujSorBtn = document.getElementById('ujSorBtn');

  form.addEventListener('submit', e => {
    e.preventDefault();
    form.style.display = 'none';

    const data = {
      ugyfelNev: form.ugyfelNev.value,
      helyszin: form.helyszin.value,
      vizsgalo: form.vizsgalo.value,
      datum: form.datum.value,
      kapcsolattarto: form.kapcsolattarto.value
    };

    //  megjelenítés felül
    osszegzesSzoveg.textContent =
      `${data.ugyfelNev} – ${data.helyszin} – ${data.datum}`;
    osszegzes.style.display = 'block';

    //  fájl mentés (JSON)
    const blob = new Blob(
      [JSON.stringify(data, null, 2)],
      { type: 'application/json' }
    );

    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `felulvizsgalat_${Date.now()}.json`;
    a.click();
    URL.revokeObjectURL(url);

    // Új sor gomb megjelenítése
    ujSorBtn.style.display = 'block';

    // form lezárása (opcionális)
    form.querySelectorAll('input').forEach(i => i.disabled = true);
  });

  ujSorBtn.addEventListener('click', () => {
    form.reset();
    form.querySelectorAll('input').forEach(i => i.disabled = false);
    //osszegzes.style.display = 'none';
    //ujSorBtn.style.display = 'none';

    form.datum.value =
      new Date().toISOString().split('T')[0];
  });

  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('sw.js');
  }
</script>

</body>
</html>
